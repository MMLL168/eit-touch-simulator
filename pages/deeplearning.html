<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="EIT æ·±åº¦å­¸ç¿’å„ªåŒ– - UNet æ¶æ§‹èˆ‡ TensorFlow.js æ•´åˆ">
    <title>æ·±åº¦å­¸ç¿’å„ªåŒ– - EIT Touch Simulator</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/navigation.css">
    <!-- TensorFlow.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js"></script>
    <style>
/* ===================================
   Deep Learning Page Styles
   =================================== */

/* å°æ¯”ç¶²æ ¼ */
.comparison-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin: 30px 0;
}

.comparison-card {
    background: white;
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.comparison-card:hover {
    transform: translateY(-5px);
}

.comparison-card.traditional {
    border-top: 5px solid #e74c3c;
}

.comparison-card.deeplearning {
    border-top: 5px solid #27ae60;
}

.comparison-card h4 {
    font-size: 1.5em;
    margin-bottom: 20px;
    color: #2c3e50;
}

.comparison-card ul {
    list-style: none;
    padding: 0;
}

.comparison-card ul li {
    padding: 12px 0;
    border-bottom: 1px solid #ecf0f1;
    font-size: 1.05em;
    line-height: 1.6;
}

.comparison-card ul li:last-child {
    border-bottom: none;
}

/* Info Box */
.info-box {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

.info-box h4 {
    font-size: 1.3em;
    margin-bottom: 15px;
    color: white;
}

.info-box p {
    font-size: 1.05em;
    line-height: 1.8;
    margin: 0;
}

/* Success Box */
.success-box {
    background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 8px 20px rgba(46, 204, 113, 0.3);
}

.success-box h4 {
    font-size: 1.3em;
    margin-bottom: 15px;
    color: white;
}

.success-box ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.success-box ul li {
    padding: 10px 0;
    padding-left: 30px;
    position: relative;
    font-size: 1.05em;
}

.success-box ul li::before {
    content: "âœ“";
    position: absolute;
    left: 0;
    font-weight: bold;
    font-size: 1.3em;
}

/* Warning Box */
.warning-box {
    background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 8px 20px rgba(243, 156, 18, 0.3);
}

.warning-box h4 {
    font-size: 1.3em;
    margin-bottom: 15px;
    color: white;
}

.warning-box ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.warning-box ul li {
    padding: 10px 0;
    padding-left: 30px;
    position: relative;
    font-size: 1.05em;
}

.warning-box ul li::before {
    content: "âš ";
    position: absolute;
    left: 0;
    font-weight: bold;
    font-size: 1.3em;
}

/* UNet æ¶æ§‹åœ– */
.unet-diagram-container {
    background: #f8f9fa;
    padding: 40px;
    border-radius: 15px;
    margin: 30px 0;
    text-align: center;
}

.unet-diagram {
    max-width: 100%;
    height: auto;
    filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
}

.unet-diagram rect {
    transition: all 0.3s ease;
}

.unet-diagram rect:hover {
    transform: scale(1.05);
    filter: brightness(1.1);
}

.unet-diagram text {
    pointer-events: none;
}

/* å„ªå‹¢å¡ç‰‡ç¶²æ ¼ */
.advantage-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin: 30px 0;
}

.advantage-card {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    border-left: 4px solid #3498db;
    transition: all 0.3s ease;
}

.advantage-card:hover {
    transform: translateX(5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}

.advantage-card h4 {
    color: #3498db;
    font-size: 1.2em;
    margin-bottom: 12px;
}

.advantage-card p {
    color: #555;
    line-height: 1.6;
}

/* å±¤ç´šè©³è§£ç¶²æ ¼ */
.layer-details-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin: 30px 0;
}

.layer-detail-card {
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    border-top: 3px solid #e74c3c;
    transition: all 0.3s ease;
}

.layer-detail-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.layer-detail-card h4 {
    color: #e74c3c;
    font-size: 1.1em;
    margin-bottom: 15px;
}

.layer-detail-card .layer-spec {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid #ecf0f1;
    font-size: 0.95em;
}

.layer-detail-card .layer-spec:last-child {
    border-bottom: none;
}

.layer-detail-card .layer-spec .label {
    color: #7f8c8d;
    font-weight: 600;
}

.layer-detail-card .layer-spec .value {
    color: #2c3e50;
    font-family: monospace;
}

/* è¨“ç·´æµç¨‹ */
.training-flow {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 30px 0;
    padding: 30px;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    position: relative;
}

.flow-step {
    flex: 1;
    text-align: center;
    position: relative;
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin: 0 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
}

.flow-step:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.flow-step::after {
    content: "â†’";
    position: absolute;
    right: -30px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 2em;
    color: #3498db;
    font-weight: bold;
}

.flow-step:last-child::after {
    display: none;
}

.flow-icon {
    font-size: 3em;
    margin-bottom: 15px;
}

.flow-step strong {
    display: block;
    color: #2c3e50;
    font-size: 1.1em;
    margin-top: 10px;
}

.flow-step p {
    color: #7f8c8d;
    font-size: 0.9em;
    margin-top: 8px;
}

/* ä»£ç¢¼å€å¡Š */
.code-block {
    background: #2d2d2d;
    border-radius: 10px;
    padding: 25px;
    margin: 25px 0;
    overflow-x: auto;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

.code-block code {
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    color: #f8f8f2;
    font-size: 0.95em;
    line-height: 1.6;
    display: block;
}

.code-block .comment {
    color: #75715e;
}

.code-block .keyword {
    color: #66d9ef;
    font-weight: bold;
}

.code-block .function {
    color: #a6e22e;
}

.code-block .string {
    color: #e6db74;
}

.code-block .number {
    color: #ae81ff;
}

/* è¡¨æ ¼æ¨£å¼ */
.data-table {
    width: 100%;
    border-collapse: collapse;
    margin: 25px 0;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
}

.data-table thead {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.data-table th,
.data-table td {
    padding: 15px 20px;
    text-align: left;
}

.data-table th {
    font-weight: 600;
    font-size: 1.05em;
}

.data-table tbody tr {
    border-bottom: 1px solid #ecf0f1;
    transition: background 0.2s ease;
}

.data-table tbody tr:hover {
    background: #f8f9fa;
}

.data-table tbody tr:last-child {
    border-bottom: none;
}

/* é€²åº¦æ¢ */
.progress-container {
    margin: 20px 0;
}

.progress-label {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    color: #2c3e50;
    font-weight: 600;
}

.progress-bar {
    width: 100%;
    height: 30px;
    background: #ecf0f1;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #3498db 0%, #2ecc71 100%);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: 15px;
    color: white;
    font-weight: bold;
    font-size: 0.9em;
    transition: width 1s ease;
    box-shadow: 0 2px 8px rgba(52, 152, 219, 0.4);
}

/* æ€§èƒ½å°æ¯”å¡ç‰‡ */
.metric-cards-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 25px;
    margin: 30px 0;
}

.metric-card {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
}

.metric-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.12);
}

.metric-card h4 {
    color: #2c3e50;
    font-size: 1.2em;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.metric-bars {
    margin-top: 15px;
}

.metric-bar {
    margin-bottom: 15px;
}

.metric-bar-label {
    font-size: 0.9em;
    color: #7f8c8d;
    margin-bottom: 5px;
}

.metric-bar-track {
    width: 100%;
    height: 35px;
    background: #ecf0f1;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
}

.metric-bar-fill {
    height: 100%;
    border-radius: 8px;
    display: flex;
    align-items: center;
    padding: 0 15px;
    color: white;
    font-weight: bold;
    font-size: 0.95em;
    transition: width 1s ease;
    position: relative;
}

.traditional-bar {
    background: linear-gradient(90deg, #e74c3c 0%, #c0392b 100%);
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
}

.dl-bar {
    background: linear-gradient(90deg, #2ecc71 0%, #27ae60 100%);
    box-shadow: 0 2px 8px rgba(46, 204, 113, 0.4);
}

.improvement-badge {
    display: inline-block;
    background: #27ae60;
    color: white;
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.85em;
    font-weight: bold;
    margin-left: 10px;
}

/* Demo å®¹å™¨ */
.demo-container {
    background: white;
    border-radius: 15px;
    padding: 35px;
    margin: 30px 0;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

.demo-controls {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-bottom: 30px;
}

.demo-button {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 8px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.demo-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
}

.demo-button:active {
    transform: translateY(0);
}

.demo-button:disabled {
    background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
    cursor: not-allowed;
    opacity: 0.6;
}

.demo-canvas-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 25px;
}

.canvas-container {
    text-align: center;
}

.canvas-container canvas {
    border: 3px solid #3498db;
    border-radius: 10px;
    background: white;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    width: 100%;
    height: auto;
}

.canvas-label {
    margin-top: 15px;
    font-weight: 600;
    color: #2c3e50;
    font-size: 1.05em;
}

/* æŠ€è¡“å¡ç‰‡ç¶²æ ¼ */
.tech-cards-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin: 30px 0;
}

.tech-card {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    border-top: 4px solid #f39c12;
    transition: all 0.3s ease;
}

.tech-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.12);
}

.tech-card h4 {
    color: #f39c12;
    font-size: 1.2em;
    margin-bottom: 15px;
}

.tech-card p {
    color: #555;
    line-height: 1.6;
    font-size: 0.95em;
}

/* éŸ¿æ‡‰å¼è¨­è¨ˆ */
@media (max-width: 768px) {
    .comparison-grid {
        grid-template-columns: 1fr;
    }
    
    .advantage-grid,
    .layer-details-grid,
    .metric-cards-grid,
    .tech-cards-grid {
        grid-template-columns: 1fr;
    }
    
    .training-flow {
        flex-direction: column;
    }
    
    .flow-step {
        margin: 10px 0;
    }
    
    .flow-step::after {
        content: "â†“";
        right: 50%;
        top: auto;
        bottom: -35px;
        transform: translateX(50%);
    }
    
    .demo-canvas-grid {
        grid-template-columns: 1fr;
    }
    
    .demo-controls {
        flex-direction: column;
    }
    
    .demo-button {
        width: 100%;
    }
}

/* å…§å®¹å€æ®µ */
.content-section {
    margin-bottom: 60px;
}

.content-section h2 {
    color: #2c3e50;
    font-size: 2em;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 3px solid #3498db;
}

.content-section h3 {
    color: #34495e;
    font-size: 1.5em;
    margin: 30px 0 20px 0;
}
    </style>
</head>
<body>
    <!-- å°èˆªåˆ— -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="nav-brand">
                <img src="../assets/images/logo.svg" alt="EIT Logo" class="nav-logo">
                <span>EIT Touch Simulator</span>
            </a>
            <button class="nav-toggle" aria-label="Toggle navigation">
                <span class="icon"></span>
                <span class="icon"></span>
                <span class="icon"></span>
            </button>
            <ul class="nav-menu">
                <li class="nav-item"><a href="../index.html" class="nav-link">é¦–é </a></li>
                <li class="nav-item"><a href="./hardware.html" class="nav-link">ç¡¬é«”æ¶æ§‹</a></li>
                <li class="nav-item"><a href="./theory.html" class="nav-link">ç†è«–åŸç†</a></li>
                <li class="nav-item"><a href="./modeling.html" class="nav-link">æ•¸å­¸å»ºæ¨¡</a></li>
                <li class="nav-item"><a href="./deeplearning.html" class="nav-link active">æ·±åº¦å­¸ç¿’</a></li>
                <li class="nav-item"><a href="./simulation.html" class="nav-link">äº’å‹•æ¨¡æ“¬</a></li>
                <li class="nav-item"><a href="./applications.html" class="nav-link">æ‡‰ç”¨æ¡ˆä¾‹</a></li>
                <li class="nav-item"><a href="./faq.html" class="nav-link">FAQ</a></li>
            </ul>
        </div>
    </nav>

    <!-- é é¢æ¨™é¡Œ -->
    <section style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 60px 20px; text-align: center;">
        <div class="container">
            <h1>ğŸ§  æ·±åº¦å­¸ç¿’å„ªåŒ–</h1>
            <p style="font-size: 1.2em; margin-top: 15px;">Deep Learning for Fast EIT Image Reconstruction</p>
        </div>
    </section>

    <div class="page-content">
        <div class="container">
            <!-- 1. å‚³çµ±æ–¹æ³•çš„å±€é™æ€§åˆ†æ -->
            <section class="content-section">
                <h2>âŒ å‚³çµ±æ–¹æ³•çš„å±€é™æ€§èˆ‡æ·±åº¦å­¸ç¿’çš„å„ªå‹¢</h2>
                
                <div class="comparison-grid">
                    <div class="comparison-card traditional">
                        <h4>âŒ å‚³çµ±æ–¹æ³•çš„å±€é™</h4>
                        <ul>
                            <li><strong>ç·šæ€§åŒ–å‡è¨­é™åˆ¶ï¼š</strong>Newton-Raphson æ–¹æ³•ä¾è³´å±€éƒ¨ç·šæ€§åŒ–ï¼Œå°å¤§è®ŠåŒ–æ•æ„Ÿ</li>
                            <li><strong>ç—…æ…‹å•é¡Œéœ€æ‰‹å‹•èª¿åƒï¼š</strong>Tikhonov æ­£å‰‡åŒ–åƒæ•¸éœ€åè¦†èª¿æ•´ï¼Œç¼ºä¹è‡ªé©æ‡‰æ€§</li>
                            <li><strong>éåº¦å¹³æ»‘å°è‡´ç´°ç¯€ä¸Ÿå¤±ï¼š</strong>æ­£å‰‡åŒ–æœƒæŠ¹é™¤é‚Šç•Œèˆ‡å°ç›®æ¨™ç‰¹å¾µ</li>
                            <li><strong>å™ªè¨Šæ•æ„Ÿæ€§ï¼š</strong>æ¸¬é‡é›œè¨Šæœƒé¡¯è‘—é™ä½é‡å»ºå“è³ª</li>
                            <li><strong>è¨ˆç®—è¤‡é›œåº¦é«˜ï¼š</strong>è¿­ä»£æ±‚è§£éœ€ 100-500msï¼Œé›£ä»¥å³æ™‚æ‡‰ç”¨</li>
                            <li><strong>å›ºå®šå…ˆé©—çŸ¥è­˜ï¼š</strong>å¹³æ»‘å…ˆé©—ä¸é©ç”¨æ–¼æ‰€æœ‰å ´æ™¯</li>
                        </ul>
                    </div>
                    
                    <div class="comparison-card deeplearning">
                        <h4>âœ… æ·±åº¦å­¸ç¿’çš„å„ªå‹¢</h4>
                        <ul>
                            <li><strong>ç«¯åˆ°ç«¯éç·šæ€§æ˜ å°„ï¼š</strong>ç›´æ¥å­¸ç¿’é›»å£“åˆ°å½±åƒçš„è¤‡é›œæ˜ å°„ï¼Œç„¡éœ€ç·šæ€§åŒ–</li>
                            <li><strong>è‡ªå‹•å­¸ç¿’æ­£å‰‡åŒ–ï¼š</strong>ç¶²è·¯éš±å¼å­¸ç¿’æœ€å„ªæ­£å‰‡åŒ–ç­–ç•¥</li>
                            <li><strong>ä¿ç•™ç´°ç¯€ï¼š</strong>è·³èºé€£æ¥èˆ‡å¤šå°ºåº¦ç‰¹å¾µèåˆä¿ç•™é‚Šç•Œè³‡è¨Š</li>
                            <li><strong>å…§å»ºå»å™ªèƒ½åŠ›ï¼š</strong>è¨“ç·´æ•¸æ“šåŒ…å«é›œè¨Šï¼Œç¶²è·¯è‡ªå‹•å­¸ç¿’å»å™ª</li>
                            <li><strong>æ¨ç†é€Ÿåº¦å¿«ï¼š</strong>å‰é¥‹è¨ˆç®—åƒ…éœ€ 5-10msï¼Œæ”¯æ´å³æ™‚äº’å‹•</li>
                            <li><strong>æ•¸æ“šé©…å‹•å…ˆé©—ï¼š</strong>å¾è¨“ç·´æ•¸æ“šè‡ªå‹•å­¸ç¿’é ˜åŸŸç‰¹å®šå…ˆé©—</li>
                        </ul>
                    </div>
                </div>
                
                <div class="info-box">
                    <h4>ğŸ’¡ æ ¸å¿ƒæ€æƒ³</h4>
                    <p>
                        æ·±åº¦å­¸ç¿’å°‡ EIT åå•é¡Œè¦–ç‚ºã€Œå½±åƒåˆ°å½±åƒã€çš„è½‰æ›ä»»å‹™ï¼Œä½¿ç”¨å¤§é‡åˆæˆæ•¸æ“šè¨“ç·´ç¥ç¶“ç¶²è·¯ï¼Œ
                        å­¸ç¿’å¾é‚Šç•Œé›»å£“æ¸¬é‡ç›´æ¥ç”Ÿæˆå°é›»ç‡åˆ†ä½ˆå½±åƒã€‚UNet æ¶æ§‹ç‰¹åˆ¥é©åˆæ­¤ä»»å‹™ï¼Œ
                        å› å…¶èƒ½åŒæ™‚æå–å…¨å±€ç‰¹å¾µï¼ˆä½é »æˆåˆ†ï¼‰å’Œå±€éƒ¨ç´°ç¯€ï¼ˆé«˜é »æˆåˆ†ï¼‰ã€‚
                    </p>
                </div>
            </section>

            <!-- 2. UNet æ¶æ§‹è©³è§£ -->
            <section class="content-section">
                <h2>ğŸ—ï¸ UNet æ¶æ§‹è©³è§£</h2>
                
                <div class="unet-diagram-container">
                    <svg class="unet-diagram" viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
                        <!-- å®šç¾©ç®­é ­æ¨™è¨˜ -->
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <polygon points="0 0, 10 3, 0 6" fill="#34495e"/>
                            </marker>
                            <marker id="arrow-skip" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                                <polygon points="0 0, 8 3, 0 6" fill="#27ae60"/>
                            </marker>
                        </defs>
                        
                        <!-- è¼¸å…¥å±¤ -->
                        <g id="input-layer">
                            <rect x="50" y="270" width="70" height="60" fill="#9b59b6" rx="5" stroke="#7d3c98" stroke-width="2"/>
                            <text x="85" y="295" fill="white" font-size="13" font-weight="bold" text-anchor="middle">è¼¸å…¥</text>
                            <text x="85" y="310" fill="white" font-size="11" text-anchor="middle">19Ã—1</text>
                            <text x="85" y="340" fill="#ecf0f1" font-size="9" text-anchor="middle">é›»å£“æ¸¬é‡</text>
                        </g>
                        
                        <!-- ç·¨ç¢¼å™¨ Block 1 -->
                        <g id="encoder1">
                            <rect x="160" y="240" width="80" height="120" fill="#3498db" rx="5" stroke="#2874a6" stroke-width="2"/>
                            <text x="200" y="265" fill="white" font-size="12" font-weight="bold" text-anchor="middle">Encoder 1</text>
                            <text x="200" y="285" fill="white" font-size="11" text-anchor="middle">Conv2D</text>
                            <text x="200" y="305" fill="#ecf0f1" font-size="10" text-anchor="middle">64Ã—64</text>
                            <text x="200" y="325" fill="#ecf0f1" font-size="10" text-anchor="middle">32 filters</text>
                            <text x="200" y="345" fill="#ecf0f1" font-size="9" text-anchor="middle">MaxPool</text>
                        </g>
                        
                        <!-- ç·¨ç¢¼å™¨ Block 2 -->
                        <g id="encoder2">
                            <rect x="280" y="200" width="80" height="200" fill="#3498db" rx="5" stroke="#2874a6" stroke-width="2"/>
                            <text x="320" y="225" fill="white" font-size="12" font-weight="bold" text-anchor="middle">Encoder 2</text>
                            <text x="320" y="245" fill="white" font-size="11" text-anchor="middle">Conv2D</text>
                            <text x="320" y="265" fill="#ecf0f1" font-size="10" text-anchor="middle">32Ã—32</text>
                            <text x="320" y="285" fill="#ecf0f1" font-size="10" text-anchor="middle">64 filters</text>
                            <text x="320" y="305" fill="#ecf0f1" font-size="9" text-anchor="middle">MaxPool</text>
                            <text x="320" y="370" fill="#ecf0f1" font-size="9" text-anchor="middle">ReLU</text>
                        </g>
                        
                        <!-- ç·¨ç¢¼å™¨ Block 3 -->
                        <g id="encoder3">
                            <rect x="400" y="150" width="80" height="300" fill="#3498db" rx="5" stroke="#2874a6" stroke-width="2"/>
                            <text x="440" y="175" fill="white" font-size="12" font-weight="bold" text-anchor="middle">Encoder 3</text>
                            <text x="440" y="195" fill="white" font-size="11" text-anchor="middle">Conv2D</text>
                            <text x="440" y="215" fill="#ecf0f1" font-size="10" text-anchor="middle">16Ã—16</text>
                            <text x="440" y="235" fill="#ecf0f1" font-size="10" text-anchor="middle">128 filters</text>
                            <text x="440" y="255" fill="#ecf0f1" font-size="9" text-anchor="middle">MaxPool</text>
                            <text x="440" y="420" fill="#ecf0f1" font-size="9" text-anchor="middle">ReLU</text>
                        </g>
                        
                        <!-- Bottleneck -->
                        <g id="bottleneck">
                            <rect x="520" y="100" width="80" height="400" fill="#f39c12" rx="5" stroke="#d68910" stroke-width="2"/>
                            <text x="560" y="125" fill="white" font-size="13" font-weight="bold" text-anchor="middle">Bottleneck</text>
                            <text x="560" y="145" fill="white" font-size="11" text-anchor="middle">Conv2D</text>
                            <text x="560" y="165" fill="#2c3e50" font-size="10" text-anchor="middle">8Ã—8</text>
                            <text x="560" y="185" fill="#2c3e50" font-size="10" text-anchor="middle">256 filters</text>
                            <text x="560" y="290" fill="#2c3e50" font-size="10" text-anchor="middle">Dropout</text>
                            <text x="560" y="310" fill="#2c3e50" font-size="10" text-anchor="middle">0.5</text>
                            <text x="560" y="470" fill="#2c3e50" font-size="9" text-anchor="middle">æœ€æ·±ç‰¹å¾µ</text>
                        </g>
                        
                        <!-- è§£ç¢¼å™¨ Block 1 -->
                        <g id="decoder1">
                            <rect x="640" y="150" width="80" height="300" fill="#e74c3c" rx="5" stroke="#cb4335" stroke-width="2"/>
                            <text x="680" y="175" fill="white" font-size="12" font-weight="bold" text-anchor="middle">Decoder 1</text>
                            <text x="680" y="195" fill="white" font-size="11" text-anchor="middle">UpSample</text>
                            <text x="680" y="215" fill="#ecf0f1" font-size="10" text-anchor="middle">16Ã—16</text>
                            <text x="680" y="235" fill="#ecf0f1" font-size="10" text-anchor="middle">128 filters</text>
                            <text x="680" y="255" fill="#ecf0f1" font-size="9" text-anchor="middle">Concat</text>
                            <text x="680" y="420" fill="#ecf0f1" font-size="9" text-anchor="middle">Conv2D</text>
                        </g>
                        
                        <!-- è§£ç¢¼å™¨ Block 2 -->
                        <g id="decoder2">
                            <rect x="760" y="200" width="80" height="200" fill="#e74c3c" rx="5" stroke="#cb4335" stroke-width="2"/>
                            <text x="800" y="225" fill="white" font-size="12" font-weight="bold" text-anchor="middle">Decoder 2</text>
                            <text x="800" y="245" fill="white" font-size="11" text-anchor="middle">UpSample</text>
                            <text x="800" y="265" fill="#ecf0f1" font-size="10" text-anchor="middle">32Ã—32</text>
                            <text x="800" y="285" fill="#ecf0f1" font-size="10" text-anchor="middle">64 filters</text>
                            <text x="800" y="305" fill="#ecf0f1" font-size="9" text-anchor="middle">Concat</text>
                            <text x="800" y="370" fill="#ecf0f1" font-size="9" text-anchor="middle">Conv2D</text>
                        </g>
                        
                        <!-- è§£ç¢¼å™¨ Block 3 -->
                        <g id="decoder3">
                            <rect x="880" y="240" width="80" height="120" fill="#e74c3c" rx="5" stroke="#cb4335" stroke-width="2"/>
                            <text x="920" y="265" fill="white" font-size="12" font-weight="bold" text-anchor="middle">Decoder 3</text>
                            <text x="920" y="285" fill="white" font-size="11" text-anchor="middle">UpSample</text>
                            <text x="920" y="305" fill="#ecf0f1" font-size="10" text-anchor="middle">64Ã—64</text>
                            <text x="920" y="325" fill="#ecf0f1" font-size="10" text-anchor="middle">32 filters</text>
                            <text x="920" y="345" fill="#ecf0f1" font-size="9" text-anchor="middle">Concat</text>
                        </g>
                        
                        <!-- è¼¸å‡ºå±¤ -->
                        <g id="output-layer">
                            <rect x="895" y="390" width="70" height="60" fill="#9b59b6" rx="5" stroke="#7d3c98" stroke-width="2"/>
                            <text x="930" y="415" fill="white" font-size="13" font-weight="bold" text-anchor="middle">è¼¸å‡º</text>
                            <text x="930" y="430" fill="white" font-size="11" text-anchor="middle">64Ã—64</text>
                            <text x="930" y="445" fill="#ecf0f1" font-size="9" text-anchor="middle">Sigmoid</text>
                        </g>
                        
                        <!-- é€£æ¥ç·š -->
                        <path d="M 120 300 L 160 300" stroke="#34495e" stroke-width="3" marker-end="url(#arrowhead)"/>
                        <path d="M 240 300 L 280 300" stroke="#34495e" stroke-width="3" marker-end="url(#arrowhead)"/>
                        <path d="M 360 300 L 400 300" stroke="#34495e" stroke-width="3" marker-end="url(#arrowhead)"/>
                        <path d="M 480 300 L 520 300" stroke="#34495e" stroke-width="3" marker-end="url(#arrowhead)"/>
                        <path d="M 600 300 L 640 300" stroke="#34495e" stroke-width="3" marker-end="url(#arrowhead)"/>
                        <path d="M 720 300 L 760 300" stroke="#34495e" stroke-width="3" marker-end="url(#arrowhead)"/>
                        <path d="M 840 300 L 880 300" stroke="#34495e" stroke-width="3" marker-end="url(#arrowhead)"/>
                        <path d="M 920 360 L 930 390" stroke="#34495e" stroke-width="3" marker-end="url(#arrowhead)"/>
                        
                        <!-- è·³èºé€£æ¥ -->
                        <path d="M 440 150 Q 560 80 680 150" stroke="#27ae60" stroke-width="3" stroke-dasharray="8,4" fill="none" marker-end="url(#arrow-skip)"/>
                        <path d="M 320 200 Q 560 120 800 200" stroke="#27ae60" stroke-width="3" stroke-dasharray="8,4" fill="none" marker-end="url(#arrow-skip)"/>
                        <path d="M 200 240 Q 560 160 920 240" stroke="#27ae60" stroke-width="3" stroke-dasharray="8,4" fill="none" marker-end="url(#arrow-skip)"/>
                        
                        <!-- æ¨™è¨»æ–‡å­— -->
                        <text x="560" y="60" fill="#27ae60" font-size="14" font-weight="bold" text-anchor="middle">è·³èºé€£æ¥ (Skip Connections)</text>
                        <text x="300" y="560" fill="#3498db" font-size="14" font-weight="bold" text-anchor="middle">ç·¨ç¢¼å™¨ (é™ç¶­)</text>
                        <text x="750" y="560" fill="#e74c3c" font-size="14" font-weight="bold" text-anchor="middle">è§£ç¢¼å™¨ (å‡ç¶­)</text>
                    </svg>
                    <p style="color: #7f8c8d; margin-top: 25px; font-size: 1.05em;">
                        <strong>UNet ç¶²è·¯æ¶æ§‹ï¼š</strong>ç·¨ç¢¼å™¨é€å±¤é™ç¶­æå–ç‰¹å¾µï¼ŒBottleneck å­¸ç¿’æœ€æ·±å±¤è¡¨ç¤ºï¼Œ
                        è§£ç¢¼å™¨é€å±¤å‡ç¶­é‡å»ºå½±åƒï¼Œè·³èºé€£æ¥ä¿ç•™ç©ºé–“ç´°ç¯€
                    </p>
                </div>
                
                <h3>ç‚ºä»€éº¼é¸æ“‡ UNetï¼Ÿ</h3>
                <div class="advantage-grid">
                    <div class="advantage-card">
                        <h4>ğŸ” å¤šå°ºåº¦ç‰¹å¾µæå–</h4>
                        <p>ç·¨ç¢¼å™¨çš„å¤šå±¤å·ç©å¯åŒæ™‚æ•æ‰å…¨å±€å½¢ç‹€å’Œå±€éƒ¨ç´‹ç†ï¼Œé©æ‡‰ä¸åŒå¤§å°çš„è§¸æ§ç›®æ¨™ã€‚</p>
                    </div>
                    <div class="advantage-card">
                        <h4>ğŸ”— è·³èºé€£æ¥ä¿ç•™ç´°ç¯€</h4>
                        <p>å°‡ç·¨ç¢¼å™¨çš„é«˜è§£æåº¦ç‰¹å¾µç›´æ¥å‚³éçµ¦è§£ç¢¼å™¨ï¼Œé˜²æ­¢é™ç¶­éç¨‹ä¸­ç´°ç¯€ä¸Ÿå¤±ï¼Œä¿æŒé‚Šç•Œæ¸…æ™°ã€‚</p>
                    </div>
                    <div class="advantage-card">
                        <h4>âš¡ åƒæ•¸é‡å°‘æ•ˆç‡é«˜</h4>
                        <p>ç¸½åƒæ•¸é‡åƒ…ç´„ 7.8Mï¼Œæ¨¡å‹æ–‡ä»¶ &lt; 30 MBï¼Œå¯å¿«é€Ÿè¼‰å…¥èˆ‡æ¨ç†ï¼Œé©åˆç€è¦½å™¨éƒ¨ç½²ã€‚</p>
                    </div>
                    <div class="advantage-card">
                        <h4>ğŸ¯ åƒç´ ç´šç²¾ç¢ºè¼¸å‡º</h4>
                        <p>è¼¸å‡º 64Ã—64 è§£æåº¦çš„å°é›»ç‡åˆ†ä½ˆåœ–ï¼Œæ¯å€‹åƒç´ å°æ‡‰ç‰©ç†ä½ç½®ï¼Œå¯ç²¾ç¢ºå®šä½è§¸æ§é»ã€‚</p>
                    </div>
                </div>
                
                <h3>è©³ç´°å±¤ç´šé…ç½®</h3>
                <div class="layer-details-grid">
                    <div class="layer-detail-card">
                        <h4>è¼¸å…¥å±¤</h4>
                        <div class="layer-spec">
                            <span class="label">å½¢ç‹€ï¼š</span>
                            <span class="value">(19, 1)</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">èªªæ˜ï¼š</span>
                            <span class="value">é›»å£“æ¸¬é‡</span>
                        </div>
                    </div>
                    
                    <div class="layer-detail-card">
                        <h4>Encoder Block 1</h4>
                        <div class="layer-spec">
                            <span class="label">å±¤é¡å‹ï¼š</span>
                            <span class="value">Conv2D</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Filtersï¼š</span>
                            <span class="value">32</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Kernelï¼š</span>
                            <span class="value">3Ã—3</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">è¼¸å‡ºï¼š</span>
                            <span class="value">64Ã—64Ã—32</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">æ¿€æ´»ï¼š</span>
                            <span class="value">ReLU</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">æ± åŒ–ï¼š</span>
                            <span class="value">MaxPool 2Ã—2</span>
                        </div>
                    </div>
                    
                    <div class="layer-detail-card">
                        <h4>Encoder Block 2</h4>
                        <div class="layer-spec">
                            <span class="label">å±¤é¡å‹ï¼š</span>
                            <span class="value">Conv2D</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Filtersï¼š</span>
                            <span class="value">64</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Kernelï¼š</span>
                            <span class="value">3Ã—3</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">è¼¸å‡ºï¼š</span>
                            <span class="value">32Ã—32Ã—64</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">æ¿€æ´»ï¼š</span>
                            <span class="value">ReLU</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">æ± åŒ–ï¼š</span>
                            <span class="value">MaxPool 2Ã—2</span>
                        </div>
                    </div>
                    
                    <div class="layer-detail-card">
                        <h4>Encoder Block 3</h4>
                        <div class="layer-spec">
                            <span class="label">å±¤é¡å‹ï¼š</span>
                            <span class="value">Conv2D</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Filtersï¼š</span>
                            <span class="value">128</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Kernelï¼š</span>
                            <span class="value">3Ã—3</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">è¼¸å‡ºï¼š</span>
                            <span class="value">16Ã—16Ã—128</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">æ¿€æ´»ï¼š</span>
                            <span class="value">ReLU</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">æ± åŒ–ï¼š</span>
                            <span class="value">MaxPool 2Ã—2</span>
                        </div>
                    </div>
                    
                    <div class="layer-detail-card" style="border-top-color: #f39c12;">
                        <h4 style="color: #f39c12;">Bottleneck</h4>
                        <div class="layer-spec">
                            <span class="label">å±¤é¡å‹ï¼š</span>
                            <span class="value">Conv2D</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Filtersï¼š</span>
                            <span class="value">256</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Kernelï¼š</span>
                            <span class="value">3Ã—3</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">è¼¸å‡ºï¼š</span>
                            <span class="value">8Ã—8Ã—256</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Dropoutï¼š</span>
                            <span class="value">0.5</span>
                        </div>
                    </div>
                    
                    <div class="layer-detail-card" style="border-top-color: #e74c3c;">
                        <h4 style="color: #e74c3c;">Decoder Block 1</h4>
                        <div class="layer-spec">
                            <span class="label">å±¤é¡å‹ï¼š</span>
                            <span class="value">UpSample</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Filtersï¼š</span>
                            <span class="value">128</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">è¼¸å‡ºï¼š</span>
                            <span class="value">16Ã—16Ã—128</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Concatï¼š</span>
                            <span class="value">Enc3 Skip</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Convï¼š</span>
                            <span class="value">3Ã—3, ReLU</span>
                        </div>
                    </div>
                    
                    <div class="layer-detail-card" style="border-top-color: #e74c3c;">
                        <h4 style="color: #e74c3c;">Decoder Block 2</h4>
                        <div class="layer-spec">
                            <span class="label">å±¤é¡å‹ï¼š</span>
                            <span class="value">UpSample</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Filtersï¼š</span>
                            <span class="value">64</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">è¼¸å‡ºï¼š</span>
                            <span class="value">32Ã—32Ã—64</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Concatï¼š</span>
                            <span class="value">Enc2 Skip</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Convï¼š</span>
                            <span class="value">3Ã—3, ReLU</span>
                        </div>
                    </div>
                    
                    <div class="layer-detail-card" style="border-top-color: #e74c3c;">
                        <h4 style="color: #e74c3c;">Decoder Block 3</h4>
                        <div class="layer-spec">
                            <span class="label">å±¤é¡å‹ï¼š</span>
                            <span class="value">UpSample</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Filtersï¼š</span>
                            <span class="value">32</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">è¼¸å‡ºï¼š</span>
                            <span class="value">64Ã—64Ã—32</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Concatï¼š</span>
                            <span class="value">Enc1 Skip</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Convï¼š</span>
                            <span class="value">3Ã—3, ReLU</span>
                        </div>
                    </div>
                    
                    <div class="layer-detail-card" style="border-top-color: #9b59b6;">
                        <h4 style="color: #9b59b6;">è¼¸å‡ºå±¤</h4>
                        <div class="layer-spec">
                            <span class="label">å±¤é¡å‹ï¼š</span>
                            <span class="value">Conv2D</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Filtersï¼š</span>
                            <span class="value">1</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">Kernelï¼š</span>
                            <span class="value">1Ã—1</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">è¼¸å‡ºï¼š</span>
                            <span class="value">64Ã—64Ã—1</span>
                        </div>
                        <div class="layer-spec">
                            <span class="label">æ¿€æ´»ï¼š</span>
                            <span class="value">Sigmoid</span>
                        </div>
                    </div>
                </div>
                
                <div class="success-box">
                    <h4>ğŸ“Š ç¶²è·¯çµ±è¨ˆ</h4>
                    <ul>
                        <li><strong>ç¸½åƒæ•¸é‡ï¼š</strong>ç´„ 7,800,000 åƒæ•¸ (~7.8M)</li>
                        <li><strong>ç¸½å±¤æ•¸ï¼š</strong>23 å±¤ï¼ˆä¸å«æ¿€æ´»èˆ‡æ± åŒ–ï¼‰</li>
                        <li><strong>è¨˜æ†¶é«”éœ€æ±‚ï¼š</strong>ç´„ 120 MBï¼ˆè¨“ç·´æ™‚å«æ¢¯åº¦ï¼‰</li>
                        <li><strong>æ¨ç†æ™‚é–“ï¼š</strong>&lt; 5 ms (GPU) / ~15 ms (CPU)</li>
                    </ul>
                </div>
            </section>

            <!-- 3. è¨“ç·´ç­–ç•¥ -->
            <section class="content-section">
                <h2>ğŸ“š è¨“ç·´ç­–ç•¥</h2>
                
                <h3>è¨“ç·´æ•¸æ“šç”Ÿæˆ</h3>
                <div class="training-flow">
                    <div class="flow-step">
                        <div class="flow-icon">ğŸ¯</div>
                        <strong>å®šç¾©è§¸æ§</strong>
                        <p>éš¨æ©Ÿä½ç½®èˆ‡åŠå¾‘</p>
                    </div>
                    <div class="flow-step">
                        <div class="flow-icon">âš™ï¸</div>
                        <strong>FEM æ­£å‘æ±‚è§£</strong>
                        <p>è¨ˆç®—é‚Šç•Œé›»å£“</p>
                    </div>
                    <div class="flow-step">
                        <div class="flow-icon">ğŸ“Š</div>
                        <strong>æ·»åŠ å™ªè¨Š</strong>
                        <p>æ¨¡æ“¬å¯¦éš›æ¸¬é‡</p>
                    </div>
                    <div class="flow-step">
                        <div class="flow-icon">ğŸ’¾</div>
                        <strong>ä¿å­˜æ¨£æœ¬</strong>
                        <p>é›»å£“-å½±åƒå°</p>
                    </div>
                </div>
                
                <h3>Python æ•¸æ“šç”Ÿæˆä»£ç¢¼</h3>
                <div class="code-block">
                    <code><span class="comment"># è¨“ç·´æ•¸æ“šç”Ÿæˆè…³æœ¬</span>
<span class="keyword">import</span> numpy <span class="keyword">as</span> np
<span class="keyword">import</span> pyeit.eit.fem <span class="keyword">as</span> fem
<span class="keyword">from</span> pyeit.eit.perm <span class="keyword">import</span> sim2perm

<span class="keyword">def</span> <span class="function">generate_training_data</span>(n_samples=<span class="number">10000</span>):
    <span class="string">"""ç”Ÿæˆ EIT è¨“ç·´æ•¸æ“š"""</span>
    X_train = []  <span class="comment"># é›»å£“æ¸¬é‡</span>
    Y_train = []  <span class="comment"># å°é›»ç‡åˆ†ä½ˆå½±åƒ</span>
    
    <span class="keyword">for</span> i <span class="keyword">in</span> range(n_samples):
        <span class="comment"># 1. éš¨æ©Ÿç”Ÿæˆè§¸æ§ä½ç½®èˆ‡åŠå¾‘</span>
        x = np.random.uniform(-<span class="number">0.3</span>, <span class="number">0.3</span>)
        y = np.random.uniform(-<span class="number">0.3</span>, <span class="number">0.3</span>)
        radius = np.random.uniform(<span class="number">0.02</span>, <span class="number">0.08</span>)
        
        <span class="comment"># 2. å‰µå»ºå°é›»ç‡åˆ†ä½ˆ (64Ã—64 ç¶²æ ¼)</span>
        sigma = np.ones((<span class="number">64</span>, <span class="number">64</span>))
        sigma = <span class="function">add_circular_anomaly</span>(sigma, x, y, radius, contrast=<span class="number">0.5</span>)
        
        <span class="comment"># 3. FEM æ­£å‘æ±‚è§£è¨ˆç®—é‚Šç•Œé›»å£“</span>
        fwd = fem.<span class="function">Forward</span>(mesh, el_pos)
        v = fwd.<span class="function">solve</span>(ex_mat, perm=sigma.flatten())
        
        <span class="comment"># 4. æ·»åŠ é«˜æ–¯å™ªè¨Š (SNR 40-60 dB)</span>
        snr_db = np.random.uniform(<span class="number">40</span>, <span class="number">60</span>)
        v_noisy = <span class="function">add_noise</span>(v, snr_db)
        
        <span class="comment"># 5. æ­£è¦åŒ–èˆ‡ä¿å­˜</span>
        v_normalized = (v_noisy - v_noisy.mean()) / v_noisy.std()
        X_train.<span class="function">append</span>(v_normalized)
        Y_train.<span class="function">append</span>(sigma)
        
        <span class="keyword">if</span> i % <span class="number">1000</span> == <span class="number">0</span>:
            <span class="function">print</span>(<span class="string">f"å·²ç”Ÿæˆ {i}/{n_samples} æ¨£æœ¬"</span>)
    
    <span class="keyword">return</span> np.array(X_train), np.array(Y_train)</code>
                </div>
                
                <h3>æ•¸æ“šå¢å¼·æŠ€è¡“</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>æŠ€è¡“</th>
                            <th>æ–¹æ³•</th>
                            <th>ç›®çš„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>æ—‹è½‰ä¸è®Šæ€§</strong></td>
                            <td>é›»æ¥µç·¨è™Ÿå¾ªç’°ç§»ä½ (0-19)</td>
                            <td>å¢å¼·æ¨¡å‹å°ä¸åŒæ³¨é›»æ¨¡å¼çš„é­¯æ£’æ€§</td>
                        </tr>
                        <tr>
                            <td><strong>å™ªè¨Šå¤šæ¨£æ€§</strong></td>
                            <td>éš¨æ©Ÿ SNR (40-60 dB)</td>
                            <td>æ¨¡æ“¬çœŸå¯¦æ¸¬é‡çš„é›œè¨Šè®ŠåŒ–</td>
                        </tr>
                        <tr>
                            <td><strong>è§¸æ§å½¢ç‹€è®ŠåŒ–</strong></td>
                            <td>åœ“å½¢ã€æ©¢åœ“ã€ä¸è¦å‰‡å½¢ç‹€</td>
                            <td>æ³›åŒ–åˆ°ä¸åŒè§¸æ§æ¨¡å¼</td>
                        </tr>
                        <tr>
                            <td><strong>å¤šé»è§¸æ§</strong></td>
                            <td>1-3 å€‹éš¨æ©Ÿè§¸æ§é»</td>
                            <td>æ”¯æ´å¤šé»åŒæ™‚è§¸æ§</td>
                        </tr>
                        <tr>
                            <td><strong>é‚Šç•Œæ•ˆæ‡‰</strong></td>
                            <td>è§¸æ§é è¿‘é‚Šç•Œçš„æ¨£æœ¬</td>
                            <td>æ”¹å–„é‚Šç·£å€åŸŸé‡å»ºå“è³ª</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>æå¤±å‡½æ•¸è¨­è¨ˆ</h3>
                <div class="code-block">
                    <code><span class="comment"># TensorFlow æå¤±å‡½æ•¸çµ„åˆ</span>
<span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf
<span class="keyword">from</span> tensorflow.keras <span class="keyword">import</span> backend <span class="keyword">as</span> K

<span class="keyword">def</span> <span class="function">combined_loss</span>(y_true, y_pred):
    <span class="string">"""çµ„åˆæå¤±å‡½æ•¸ï¼šMSE + SSIM + Perceptual"""</span>
    
    <span class="comment"># 1. åƒç´ ç´š MSE æå¤±</span>
    mse_loss = K.<span class="function">mean</span>(K.<span class="function">square</span>(y_true - y_pred))
    
    <span class="comment"># 2. çµæ§‹ç›¸ä¼¼æ€§ (SSIM) æå¤±</span>
    ssim_loss = <span class="number">1.0</span> - tf.image.<span class="function">ssim</span>(y_true, y_pred, max_val=<span class="number">1.0</span>)
    
    <span class="comment"># 3. æ„ŸçŸ¥æå¤± (é‚Šç•Œä¿æŒ)</span>
    grad_true_x = y_true[:, :, <span class="number">1</span>:, :] - y_true[:, :, :-<span class="number">1</span>, :]
    grad_pred_x = y_pred[:, :, <span class="number">1</span>:, :] - y_pred[:, :, :-<span class="number">1</span>, :]
    grad_true_y = y_true[:, <span class="number">1</span>:, :, :] - y_true[:, :-<span class="number">1</span>, :, :]
    grad_pred_y = y_pred[:, <span class="number">1</span>:, :, :] - y_pred[:, :-<span class="number">1</span>, :, :]
    
    perceptual_loss = K.<span class="function">mean</span>(K.<span class="function">abs</span>(grad_true_x - grad_pred_x)) + \
                      K.<span class="function">mean</span>(K.<span class="function">abs</span>(grad_true_y - grad_pred_y))
    
    <span class="comment"># åŠ æ¬Šçµ„åˆ</span>
    total_loss = <span class="number">0.5</span> * mse_loss + <span class="number">0.3</span> * ssim_loss + <span class="number">0.2</span> * perceptual_loss
    
    <span class="keyword">return</span> total_loss</code>
                </div>
                
                <h3>è¨“ç·´è¶…åƒæ•¸</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>åƒæ•¸</th>
                            <th>å€¼</th>
                            <th>èªªæ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>è¨“ç·´æ¨£æœ¬</strong></td>
                            <td>10,000</td>
                            <td>åˆæˆæ•¸æ“šï¼ŒåŒ…å«å¤šç¨®è§¸æ§æ¨¡å¼</td>
                        </tr>
                        <tr>
                            <td><strong>é©—è­‰æ¨£æœ¬</strong></td>
                            <td>2,000</td>
                            <td>ç”¨æ–¼ç›£æ§éæ“¬åˆ</td>
                        </tr>
                        <tr>
                            <td><strong>Batch Size</strong></td>
                            <td>32</td>
                            <td>å¹³è¡¡è¨˜æ†¶é«”èˆ‡è¨“ç·´ç©©å®šæ€§</td>
                        </tr>
                        <tr>
                            <td><strong>Epochs</strong></td>
                            <td>100-200</td>
                            <td>ç›´åˆ°é©—è­‰æå¤±æ”¶æ–‚</td>
                        </tr>
                        <tr>
                            <td><strong>å„ªåŒ–å™¨</strong></td>
                            <td>Adam</td>
                            <td>è‡ªé©æ‡‰å­¸ç¿’ç‡ï¼Œæ”¶æ–‚å¿«</td>
                        </tr>
                        <tr>
                            <td><strong>åˆå§‹å­¸ç¿’ç‡</strong></td>
                            <td>1e-3</td>
                            <td>é€æ­¥è¡°æ¸›è‡³ 1e-5</td>
                        </tr>
                        <tr>
                            <td><strong>Dropout</strong></td>
                            <td>0.5</td>
                            <td>Bottleneck å±¤é˜²æ­¢éæ“¬åˆ</td>
                        </tr>
                        <tr>
                            <td><strong>è¨“ç·´æ™‚é–“</strong></td>
                            <td>2-4 å°æ™‚</td>
                            <td>NVIDIA RTX 3080</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>è¨“ç·´é€²åº¦ç›£æ§</h3>
                <div class="progress-container">
                    <div class="progress-label">
                        <span>è¨“ç·´æå¤± (Training Loss)</span>
                        <span>0.0234</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%;">Epoch 150/200</div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-label">
                        <span>é©—è­‰æå¤± (Validation Loss)</span>
                        <span>0.0345</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 70%; background: linear-gradient(90deg, #e74c3c 0%, #c0392b 100%);">Epoch 150/200</div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-label">
                        <span>SSIM æŒ‡æ¨™</span>
                        <span>0.92</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 92%; background: linear-gradient(90deg, #2ecc71 0%, #27ae60 100%);">92%</div>
                    </div>
                </div>
            </section>

            <!-- 4. æ€§èƒ½å°æ¯” -->
            <section class="content-section">
                <h2>ğŸ“Š æ€§èƒ½å°æ¯”</h2>
                
                <h3>é‡å»ºå“è³ªæŒ‡æ¨™</h3>
                <div class="metric-cards-grid">
                    <div class="metric-card">
                        <h4>ğŸ“‰ å¹³å‡çµ•å°èª¤å·® (MAE)</h4>
                        <div class="metric-bars">
                            <div class="metric-bar">
                                <div class="metric-bar-label">å‚³çµ±æ–¹æ³• (Tikhonov)</div>
                                <div class="metric-bar-track">
                                    <div class="metric-bar-fill traditional-bar" style="width: 60%;">0.12</div>
                                </div>
                            </div>
                            <div class="metric-bar">
                                <div class="metric-bar-label">æ·±åº¦å­¸ç¿’ (UNet)</div>
                                <div class="metric-bar-track">
                                    <div class="metric-bar-fill dl-bar" style="width: 20%;">0.04</div>
                                </div>
                            </div>
                        </div>
                        <span class="improvement-badge">â†“ 67%</span>
                    </div>
                    
                    <div class="metric-card">
                        <h4>ğŸ¯ çµæ§‹ç›¸ä¼¼æ€§ (SSIM)</h4>
                        <div class="metric-bars">
                            <div class="metric-bar">
                                <div class="metric-bar-label">å‚³çµ±æ–¹æ³• (Tikhonov)</div>
                                <div class="metric-bar-track">
                                    <div class="metric-bar-fill traditional-bar" style="width: 72%;">0.72</div>
                                </div>
                            </div>
                            <div class="metric-bar">
                                <div class="metric-bar-label">æ·±åº¦å­¸ç¿’ (UNet)</div>
                                <div class="metric-bar-track">
                                    <div class="metric-bar-fill dl-bar" style="width: 92%;">0.92</div>
                                </div>
                            </div>
                        </div>
                        <span class="improvement-badge">â†‘ 28%</span>
                    </div>
                    
                    <div class="metric-card">
                        <h4>ğŸ“ å®šä½èª¤å·® (mm)</h4>
                        <div class="metric-bars">
                            <div class="metric-bar">
                                <div class="metric-bar-label">å‚³çµ±æ–¹æ³• (Tikhonov)</div>
                                <div class="metric-bar-track">
                                    <div class="metric-bar-fill traditional-bar" style="width: 75%;">7.5 mm</div>
                                </div>
                            </div>
                            <div class="metric-bar">
                                <div class="metric-bar-label">æ·±åº¦å­¸ç¿’ (UNet)</div>
                                <div class="metric-bar-track">
                                    <div class="metric-bar-fill dl-bar" style="width: 38%;">3.8 mm</div>
                                </div>
                            </div>
                        </div>
                        <span class="improvement-badge">â†“ 49%</span>
                    </div>
                    
                    <div class="metric-card">
                        <h4>âš¡ è¨ˆç®—æ™‚é–“ (ms)</h4>
                        <div class="metric-bars">
                            <div class="metric-bar">
                                <div class="metric-bar-label">å‚³çµ±æ–¹æ³• (è¿­ä»£)</div>
                                <div class="metric-bar-track">
                                    <div class="metric-bar-fill traditional-bar" style="width: 80%;">40 ms</div>
                                </div>
                            </div>
                            <div class="metric-bar">
                                <div class="metric-bar-label">æ·±åº¦å­¸ç¿’ (GPU)</div>
                                <div class="metric-bar-track">
                                    <div class="metric-bar-fill dl-bar" style="width: 9%;">4.5 ms</div>
                                </div>
                            </div>
                        </div>
                        <span class="improvement-badge">â†“ 89%</span>
                    </div>
                </div>
                
                <h3>è©³ç´°æ€§èƒ½è¡¨æ ¼</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>æ–¹æ³•</th>
                            <th>MAE</th>
                            <th>RMSE</th>
                            <th>SSIM</th>
                            <th>PSNR (dB)</th>
                            <th>å®šä½èª¤å·® (mm)</th>
                            <th>æ¨ç†æ™‚é–“</th>
                            <th>è¨˜æ†¶é«”</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Tikhonov</strong></td>
                            <td>0.12</td>
                            <td>0.18</td>
                            <td>0.72</td>
                            <td>28.3</td>
                            <td>7.5</td>
                            <td>5 ms</td>
                            <td>50 MB</td>
                        </tr>
                        <tr>
                            <td><strong>è¿­ä»£ Gauss-Newton</strong></td>
                            <td>0.09</td>
                            <td>0.14</td>
                            <td>0.78</td>
                            <td>30.1</td>
                            <td>5.2</td>
                            <td>40 ms</td>
                            <td>80 MB</td>
                        </tr>
                        <tr style="background: #e8f8f5;">
                            <td><strong>UNet (CPU)</strong></td>
                            <td>0.05</td>
                            <td>0.08</td>
                            <td>0.89</td>
                            <td>34.5</td>
                            <td>4.2</td>
                            <td>15 ms</td>
                            <td>120 MB</td>
                        </tr>
                        <tr style="background: #d5f4e6;">
                            <td><strong>UNet (GPU)</strong></td>
                            <td><strong>0.04</strong></td>
                            <td><strong>0.06</strong></td>
                            <td><strong>0.92</strong></td>
                            <td><strong>36.2</strong></td>
                            <td><strong>3.8</strong></td>
                            <td><strong>4.5 ms</strong></td>
                            <td>120 MB</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="success-box">
                    <h4>ğŸ‰ é—œéµç™¼ç¾</h4>
                    <ul>
                        <li><strong>å“è³ªæå‡ï¼š</strong>SSIM å¾ 0.72 æå‡è‡³ 0.92ï¼Œå½±åƒæ¸…æ™°åº¦é¡¯è‘—æ”¹å–„</li>
                        <li><strong>é€Ÿåº¦å„ªå‹¢ï¼š</strong>GPU æ¨ç†åƒ…éœ€ 4.5 msï¼Œç›¸æ¯”è¿­ä»£æ–¹æ³•å¿« 9 å€</li>
                        <li><strong>å¯¦æ™‚å¯è¡Œï¼š</strong>æ”¯æ´ 200+ FPS çš„é‡å»ºé€Ÿç‡ï¼Œæ»¿è¶³å³æ™‚äº’å‹•éœ€æ±‚</li>
                        <li><strong>ç²¾åº¦æå‡ï¼š</strong>å®šä½èª¤å·®é™ä½ 49%ï¼Œé©ç”¨æ–¼ç²¾å¯†è§¸æ§æ‡‰ç”¨</li>
                    </ul>
                </div>
            </section>

            <!-- 5. TensorFlow.js ç€è¦½å™¨éƒ¨ç½² -->
            <section class="content-section">
                <h2>ğŸŒ TensorFlow.js ç€è¦½å™¨éƒ¨ç½²</h2>
                
                <h3>æ¨¡å‹è½‰æ›æµç¨‹</h3>
                <div class="code-block">
                    <code><span class="comment"># æ­¥é©Ÿ 1: ä¿å­˜ Keras æ¨¡å‹</span>
model.<span class="function">save</span>(<span class="string">'unet_eit_model.h5'</span>)

<span class="comment"># æ­¥é©Ÿ 2: å®‰è£ TensorFlow.js è½‰æ›å™¨</span>
pip install tensorflowjs

<span class="comment"># æ­¥é©Ÿ 3: è½‰æ›ç‚º TensorFlow.js æ ¼å¼</span>
tensorflowjs_converter \
    --input_format=keras \
    --output_format=tfjs_layers_model \
    unet_eit_model.h5 \
    ./tfjs_model/

<span class="comment"># æ­¥é©Ÿ 4: (å¯é¸) é‡åŒ–å£“ç¸®æ¨¡å‹</span>
tensorflowjs_converter \
    --input_format=keras \
    --output_format=tfjs_layers_model \
    --quantization_bytes <span class="number">2</span> \
    unet_eit_model.h5 \
    ./tfjs_model_quantized/

<span class="comment"># è¼¸å‡ºæ–‡ä»¶ï¼š</span>
<span class="comment"># - model.json (ç¶²è·¯æ¶æ§‹èˆ‡æ¬Šé‡å…ƒæ•¸æ“š)</span>
<span class="comment"># - group1-shard1of*.bin (æ¬Šé‡æ•¸æ“š)</span></code>
                </div>
                
                <h3>ç€è¦½å™¨è¼‰å…¥èˆ‡æ¨ç†</h3>
                <div class="code-block">
                    <code><span class="comment">// 1. è¼‰å…¥æ¨¡å‹</span>
<span class="keyword">let</span> model;

<span class="keyword">async function</span> <span class="function">loadModel</span>() {
    <span class="function">console.log</span>(<span class="string">'è¼‰å…¥ TensorFlow.js æ¨¡å‹...'</span>);
    model = <span class="keyword">await</span> tf.loadLayersModel(<span class="string">'./tfjs_model/model.json'</span>);
    <span class="function">console.log</span>(<span class="string">'æ¨¡å‹è¼‰å…¥æˆåŠŸï¼'</span>);
}

<span class="comment">// 2. æ¨ç†å‡½å¼</span>
<span class="keyword">async function</span> <span class="function">reconstructTouch</span>(voltages) {
    <span class="comment">// é è™•ç†ï¼šé›»å£“æ­£è¦åŒ–</span>
    <span class="keyword">const</span> mean = voltages.reduce(<span class="keyword">(a, b)</span> => a + b) / voltages.length;
    <span class="keyword">const</span> std = Math.sqrt(
        voltages.map(<span class="keyword">v</span> => (v - mean) ** <span class="number">2</span>)
                .reduce(<span class="keyword">(a, b)</span> => a + b) / voltages.length
    );
    <span class="keyword">const</span> normalized = voltages.map(<span class="keyword">v</span> => (v - mean) / std);
    
    <span class="comment">// è½‰æ›ç‚º Tensor (æ‰¹æ¬¡ç¶­åº¦ + ç‰¹å¾µç¶­åº¦)</span>
    <span class="keyword">const</span> inputTensor = tf.tensor2d([normalized], [<span class="number">1</span>, <span class="number">19</span>]);
    
    <span class="comment">// æ¨¡å‹æ¨ç†</span>
    <span class="keyword">const</span> output = model.predict(inputTensor);
    
    <span class="comment">// è½‰æ›ç‚º JavaScript é™£åˆ—</span>
    <span class="keyword">const</span> sigmaPred = <span class="keyword">await</span> output.data();
    
    <span class="comment">// é‡‹æ”¾è¨˜æ†¶é«”</span>
    inputTensor.dispose();
    output.dispose();
    
    <span class="keyword">return</span> sigmaPred; <span class="comment">// å½¢ç‹€: [4096] = 64Ã—64</span>
}

<span class="comment">// 3. è¦–è¦ºåŒ–æ¸²æŸ“</span>
<span class="keyword">function</span> <span class="function">drawReconstruction</span>(canvas, sigmaArray) {
    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);
    <span class="keyword">const</span> imageData = ctx.createImageData(<span class="number">64</span>, <span class="number">64</span>);
    
    <span class="comment">// åƒç´ ç´šç¹ªè£½</span>
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i < sigmaArray.length; i++) {
        <span class="keyword">const</span> value = Math.floor(sigmaArray[i] * <span class="number">255</span>);
        imageData.data[i * <span class="number">4</span>] = value;     <span class="comment">// R</span>
        imageData.data[i * <span class="number">4</span> + <span class="number">1</span>] = value; <span class="comment">// G</span>
        imageData.data[i * <span class="number">4</span> + <span class="number">2</span>] = value; <span class="comment">// B</span>
        imageData.data[i * <span class="number">4</span> + <span class="number">3</span>] = <span class="number">255</span>;   <span class="comment">// Alpha</span>
    }
    
    ctx.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);
}</code>
                </div>
                
                <h3>äº’å‹•å¼ç¤ºç¯„</h3>
                <div class="demo-container">
                    <div class="demo-controls">
                        <button class="demo-button" onclick="loadTFJSModel()">ğŸ“¥ è¼‰å…¥æ¨¡å‹</button>
                        <button class="demo-button" onclick="simulateMeasurement()">ğŸ¯ æ¨¡æ“¬æ¸¬é‡</button>
                        <button class="demo-button" onclick="runReconstruction()">ğŸš€ åŸ·è¡Œé‡å»º</button>
                    </div>
                    
                    <div class="demo-canvas-grid">
                        <div class="canvas-container">
                            <canvas id="inputCanvas" width="250" height="250"></canvas>
                            <div class="canvas-label">è¼¸å…¥é›»å£“</div>
                        </div>
                        <div class="canvas-container">
                            <canvas id="traditionalCanvas" width="250" height="250"></canvas>
                            <div class="canvas-label">å‚³çµ±æ–¹æ³•é‡å»º</div>
                        </div>
                        <div class="canvas-container">
                            <canvas id="dlCanvas" width="250" height="250"></canvas>
                            <div class="canvas-label">æ·±åº¦å­¸ç¿’é‡å»º</div>
                        </div>
                    </div>
                </div>
                
                <div class="warning-box">
                    <h4>âš ï¸ æ€§èƒ½å„ªåŒ–å»ºè­°</h4>
                    <ul>
                        <li><strong>WebGL å¾Œç«¯ï¼š</strong>å„ªå…ˆä½¿ç”¨ GPU åŠ é€Ÿï¼Œæ¨ç†é€Ÿåº¦æå‡ 10-20 å€</li>
                        <li><strong>æ¨¡å‹é‡åŒ–ï¼š</strong>è½‰æ›ç‚º uint8 é‡åŒ–ç‰ˆæœ¬ï¼Œæ¨¡å‹å¤§å°æ¸›å°‘ 75%</li>
                        <li><strong>WebAssembly å›é€€ï¼š</strong>åœ¨ä¸æ”¯æ´ WebGL çš„ç’°å¢ƒä½¿ç”¨ WASM å¾Œç«¯</li>
                        <li><strong>é›¢ç·šç·©å­˜ï¼š</strong>ä½¿ç”¨ Service Worker ç·©å­˜æ¨¡å‹æ–‡ä»¶ï¼ŒåŠ å¿«è¼‰å…¥é€Ÿåº¦</li>
                    </ul>
                </div>
            </section>

            <!-- 6. é€²éšæŠ€è¡“å±•æœ› -->
            <section class="content-section">
                <h2>ğŸ”® é€²éšæŠ€è¡“å±•æœ›</h2>
                
                <div class="tech-cards-grid">
                    <div class="tech-card">
                        <h4>ğŸ¯ æ³¨æ„åŠ›æ©Ÿåˆ¶</h4>
                        <p>
                            <strong>Self-Attentionï¼š</strong>åœ¨ Bottleneck å±¤å¼•å…¥è‡ªæ³¨æ„åŠ›æ©Ÿåˆ¶ï¼Œ
                            è®“ç¶²è·¯è‡ªå‹•é—œæ³¨é‡è¦å€åŸŸï¼Œæå‡å°ç›®æ¨™æª¢æ¸¬èƒ½åŠ›ã€‚å¯å­¸ç¿’é›»æ¥µé–“çš„é•·è·é›¢ä¾è³´é—œä¿‚ï¼Œ
                            æ”¹å–„é‚Šç•Œå€åŸŸçš„é‡å»ºå“è³ªã€‚
                        </p>
                    </div>
                    
                    <div class="tech-card">
                        <h4>âš™ï¸ ç‰©ç†ç´„æŸåµŒå…¥</h4>
                        <p>
                            <strong>Physics-Informed Neural Networksï¼š</strong>å°‡ Maxwell æ–¹ç¨‹å¼ä½œç‚ºæå¤±å‡½æ•¸çš„ä¸€éƒ¨åˆ†ï¼Œ
                            ç¢ºä¿é‡å»ºçµæœç¬¦åˆé›»ç£å ´ç‰©ç†å®šå¾‹ã€‚çµåˆæ•¸æ“šé©…å‹•èˆ‡ç‰©ç†é©…å‹•ï¼Œæ¸›å°‘å°è¨“ç·´æ•¸æ“šçš„ä¾è³´ã€‚
                        </p>
                    </div>
                    
                    <div class="tech-card">
                        <h4>ğŸ”¬ å¤šå°ºåº¦èåˆ</h4>
                        <p>
                            <strong>Multi-scale Feature Fusionï¼š</strong>ä½¿ç”¨ç‰¹å¾µé‡‘å­—å¡”ç¶²è·¯ (FPN) æ•´åˆä¸åŒå°ºåº¦çš„ç‰¹å¾µåœ–ï¼Œ
                            åŒæ™‚æ•æ‰å…¨å±€ä¸Šä¸‹æ–‡èˆ‡å±€éƒ¨ç´°ç¯€ï¼Œæå‡å°ä¸åŒå¤§å°è§¸æ§ç›®æ¨™çš„é©æ‡‰æ€§ã€‚
                        </p>
                    </div>
                </div>
                
                <div class="info-box">
                    <h4>ğŸš€ æœªä¾†ç™¼å±•æ–¹å‘</h4>
                    <p>
                        <strong>1. é·ç§»å­¸ç¿’ (Transfer Learning)ï¼š</strong>
                        ä½¿ç”¨åˆæˆæ•¸æ“šé è¨“ç·´æ¨¡å‹ï¼Œå†ç”¨å°‘é‡å¯¦éš›æ¸¬é‡æ•¸æ“šå¾®èª¿ï¼Œé™ä½å°å¤§è¦æ¨¡æ¨™è¨»æ•¸æ“šçš„éœ€æ±‚ã€‚
                        <br><br>
                        <strong>2. ä¸ç¢ºå®šæ€§é‡åŒ– (Uncertainty Quantification)ï¼š</strong>
                        æ¡ç”¨ Bayesian Neural Networks æˆ– Monte Carlo Dropoutï¼Œç‚ºé‡å»ºçµæœæä¾›å¯ä¿¡åº¦è©•ä¼°ï¼Œ
                        è­˜åˆ¥æ¨¡å‹ä¸ç¢ºå®šçš„å€åŸŸã€‚
                        <br><br>
                        <strong>3. å¯¦æ™‚è‡ªé©æ‡‰ (Online Learning)ï¼š</strong>
                        åœ¨ä½¿ç”¨éç¨‹ä¸­æŒçºŒå­¸ç¿’ï¼Œæ ¹æ“šç”¨æˆ¶å›é¥‹èª¿æ•´æ¨¡å‹åƒæ•¸ï¼Œé©æ‡‰ä¸åŒçš„æ‡‰ç”¨å ´æ™¯èˆ‡ç’°å¢ƒè®ŠåŒ–ã€‚
                    </p>
                </div>
            </section>

            <!-- ç›¸é—œç« ç¯€å°èˆª -->
            <section class="content-section">
                <h2>ğŸ”— ç›¸é—œç« ç¯€</h2>
                <div class="nav-cards">
                    <a href="./modeling.html" class="nav-card">
                        <div class="nav-card-icon">ğŸ“</div>
                        <h3>æ•¸å­¸å»ºæ¨¡</h3>
                        <p>äº†è§£æ·±åº¦å­¸ç¿’è¦å–ä»£çš„å‚³çµ±æ–¹æ³•</p>
                    </a>
                    <a href="./simulation.html" class="nav-card">
                        <div class="nav-card-icon">ğŸ®</div>
                        <h3>äº’å‹•æ¨¡æ“¬</h3>
                        <p>é«”é©—å³æ™‚é‡å»ºæ•ˆæœ</p>
                    </a>
                    <a href="./applications.html" class="nav-card">
                        <div class="nav-card-icon">ğŸš€</div>
                        <h3>æ‡‰ç”¨æ¡ˆä¾‹</h3>
                        <p>æ¢ç´¢å¯¦éš›æ‡‰ç”¨å ´æ™¯</p>
                    </a>
                </div>
            </section>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 EIT Touch Simulator Project. All rights reserved.</p>
        </div>
    </footer>

    <script src="../assets/js/common.js"></script>
    <script src="../assets/js/navigation.js"></script>
    
    <script>
// ===================================
// TensorFlow.js Deep Learning Demo
// ===================================

let model;
let baselineVoltages = new Array(19).fill(0);
let currentVoltages = null;

// 1. è¼‰å…¥ TensorFlow.js æ¨¡å‹
async function loadTFJSModel() {
    const button = event.target;
    button.disabled = true;
    button.textContent = 'è¼‰å…¥ä¸­...';
    
    try {
        // æ³¨æ„ï¼šé€™æ˜¯ç¤ºç¯„è·¯å¾‘ï¼Œå¯¦éš›éƒ¨ç½²éœ€æº–å‚™çœŸå¯¦æ¨¡å‹æ–‡ä»¶
        model = await tf.loadLayersModel('./tfjs_model/model.json');
        button.textContent = 'âœ“ å·²è¼‰å…¥';
        button.style.background = 'linear-gradient(135deg, #27ae60 0%, #229954 100%)';
        console.log('æ¨¡å‹è¼‰å…¥æˆåŠŸï¼');
    } catch (error) {
        button.textContent = 'âœ— è¼‰å…¥å¤±æ•—ï¼ˆéœ€æº–å‚™æ¨¡å‹æ–‡ä»¶ï¼‰';
        button.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
        console.error('æ¨¡å‹è¼‰å…¥å¤±æ•—:', error);
        console.log('æç¤ºï¼šé€™æ˜¯ç¤ºç¯„é é¢ï¼Œå¯¦éš›ä½¿ç”¨éœ€å°‡è¨“ç·´å¥½çš„æ¨¡å‹è½‰æ›ç‚º TensorFlow.js æ ¼å¼ä¸¦æ”¾ç½®åœ¨ ./tfjs_model/ ç›®éŒ„');
    }
}

// 2. å¯¦æ™‚æ¨ç†
async function reconstructTouch(voltages) {
    // è¨ˆç®—å·®åˆ†é›»å£“
    const deltaV = voltages.map((v, i) => v - baselineVoltages[i]);
    
    // æ­£è¦åŒ–
    const mean = deltaV.reduce((a, b) => a + b) / deltaV.length;
    const variance = deltaV.reduce((sum, v) => sum + (v - mean) ** 2, 0) / deltaV.length;
    const std = Math.sqrt(variance) || 1;
    const normalized = deltaV.map(v => (v - mean) / std);
    
    // è½‰æ›ç‚º Tensor
    const inputTensor = tf.tensor2d([normalized], [1, 19]);
    
    // æ¨¡å‹æ¨ç†
    const output = model.predict(inputTensor);
    const sigmaPred = await output.data();
    
    // é‡‹æ”¾è¨˜æ†¶é«”
    inputTensor.dispose();
    output.dispose();
    
    return sigmaPred; // [4096] = 64Ã—64
}

// 3. Canvas ç¹ªåœ–å‡½å¼
function drawInputVoltages(canvas, voltages) {
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = 80;
    
    // ç¹ªè£½åœ“å½¢é‚Šç•Œ
    ctx.strokeStyle = '#34495e';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
    ctx.stroke();
    
    // ç¹ªè£½é›»æ¥µä½ç½®èˆ‡é›»å£“
    for (let i = 0; i < 20; i++) {
        const angle = (i / 20) * 2 * Math.PI - Math.PI / 2;
        const x = centerX + radius * Math.cos(angle);
        const y = centerY + radius * Math.sin(angle);
        
        // é›»æ¥µé»
        ctx.fillStyle = '#3498db';
        ctx.beginPath();
        ctx.arc(x, y, 6, 0, 2 * Math.PI);
        ctx.fill();
        
        // é›»å£“æ¢å½¢åœ–ï¼ˆé™¤äº†æœ€å¾Œä¸€å€‹åƒè€ƒé›»æ¥µï¼‰
        if (i < 19) {
            const voltage = voltages[i];
            const barHeight = Math.abs(voltage) * 30;
            ctx.fillStyle = voltage > 0 ? '#27ae60' : '#e74c3c';
            ctx.fillRect(x - 3, y - barHeight, 6, barHeight);
        }
        
        // é›»æ¥µç·¨è™Ÿ
        ctx.fillStyle = '#2c3e50';
        ctx.font = '10px Arial';
        ctx.textAlign = 'center';
        ctx.fillText(i, x, y - 15);
    }
}

function drawReconstruction(canvas, sigmaArray) {
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    const imageData = ctx.createImageData(64, 64);
    
    // æ‰¾åˆ°æœ€å¤§æœ€å°å€¼ç”¨æ–¼æ­£è¦åŒ–
    const maxVal = Math.max(...sigmaArray);
    const minVal = Math.min(...sigmaArray);
    const range = maxVal - minVal || 1;
    
    // ç¹ªè£½ 64Ã—64 å½±åƒ
    for (let i = 0; i < sigmaArray.length; i++) {
        const normalized = (sigmaArray[i] - minVal) / range;
        const value = Math.floor(normalized * 255);
        imageData.data[i * 4] = value;
        imageData.data[i * 4 + 1] = value;
        imageData.data[i * 4 + 2] = value;
        imageData.data[i * 4 + 3] = 255;
    }
    
    // å‰µå»ºè‡¨æ™‚ canvas ç”¨æ–¼ç¸®æ”¾
    const tempCanvas = document.createElement('canvas');
    tempCanvas.width = 64;
    tempCanvas.height = 64;
    const tempCtx = tempCanvas.getContext('2d');
    tempCtx.putImageData(imageData, 0, 0);
    
    // ç¸®æ”¾ç¹ªè£½åˆ°ç›®æ¨™ canvas
    ctx.imageSmoothingEnabled = false;
    ctx.drawImage(tempCanvas, 0, 0, 64, 64, 0, 0, canvas.width, canvas.height);
}

// 4. æ¨¡æ“¬æ¸¬é‡
function simulateMeasurement() {
    // æ¨¡æ“¬å–®é»è§¸æ§
    const touchX = Math.random() * 0.6 - 0.3;
    const touchY = Math.random() * 0.6 - 0.3;
    const touchRadius = 0.05;
    
    console.log(`æ¨¡æ“¬è§¸æ§: (${touchX.toFixed(2)}, ${touchY.toFixed(2)})`);
    
    // ç°¡åŒ–çš„ FEM æ¨¡æ“¬ï¼ˆå¯¦éš›æ‡‰ä½¿ç”¨å®Œæ•´ FEMï¼‰
    const voltages = [];
    for (let i = 0; i < 19; i++) {
        const angle = (i / 20) * 2 * Math.PI;
        const ex = Math.cos(angle);
        const ey = Math.sin(angle);
        const dist = Math.sqrt((ex - touchX) ** 2 + (ey - touchY) ** 2);
        
        // ç°¡åŒ–é›»ä½è¡°æ¸›æ¨¡å‹
        const v = 1.0 / (1 + dist * 3);
        
        // æ·»åŠ é›œè¨Š
        const noise = (Math.random() - 0.5) * 0.05;
        voltages.push(v + noise);
    }
    
    // ç¹ªè£½åˆ° inputCanvas
    const canvas = document.getElementById('inputCanvas');
    if (canvas) {
        drawInputVoltages(canvas, voltages);
        currentVoltages = voltages;
        console.log('é›»å£“æ¸¬é‡å·²ç¹ªè£½');
    }
}

// 5. åŸ·è¡Œé‡å»ºå°æ¯”
async function runReconstruction() {
    if (!currentVoltages) {
        alert('è«‹å…ˆæ¨¡æ“¬æ¸¬é‡ï¼');
        return;
    }
    
    const button = event.target;
    const originalText = button.textContent;
    button.disabled = true;
    button.textContent = 'é‡å»ºä¸­...';
    
    try {
        // å‚³çµ±æ–¹æ³•ï¼ˆç°¡åŒ–ç‰ˆ Tikhonovï¼‰
        const sigmaTraditional = tikhonovSimplified(currentVoltages);
        const canvas1 = document.getElementById('traditionalCanvas');
        if (canvas1) {
            drawReconstruction(canvas1, sigmaTraditional);
        }
        
        // æ·±åº¦å­¸ç¿’æ–¹æ³•
        if (model) {
            const sigmaDL = await reconstructTouch(currentVoltages);
            const canvas2 = document.getElementById('dlCanvas');
            if (canvas2) {
                drawReconstruction(canvas2, Array.from(sigmaDL));
            }
            button.textContent = 'âœ“ é‡å»ºå®Œæˆ';
        } else {
            // æ¨¡å‹æœªè¼‰å…¥æ™‚ï¼Œé¡¯ç¤ºç¤ºç¯„åœ–æ¡ˆ
            const canvas2 = document.getElementById('dlCanvas');
            if (canvas2) {
                const demoSigma = generateDemoReconstruction(currentVoltages);
                drawReconstruction(canvas2, demoSigma);
            }
            button.textContent = 'âœ“ é‡å»ºå®Œæˆï¼ˆç¤ºç¯„æ¨¡å¼ï¼‰';
        }
        
        console.log('é‡å»ºå®Œæˆ');
    } catch (error) {
        console.error('é‡å»ºå¤±æ•—:', error);
        button.textContent = 'âœ— é‡å»ºå¤±æ•—';
        button.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
    } finally {
        setTimeout(() => {
            button.disabled = false;
            button.textContent = originalText;
            button.style.background = '';
        }, 2000);
    }
}

// ç°¡åŒ–çš„ Tikhonov é‡å»ºï¼ˆç¤ºç¯„ç”¨ï¼‰
function tikhonovSimplified(voltages) {
    const sigma = new Array(4096).fill(0);
    
    // ä½¿ç”¨ç°¡åŒ–çš„åæŠ•å½±æ–¹æ³•
    for (let i = 0; i < 19; i++) {
        const v = voltages[i];
        const angle = (i / 20) * 2 * Math.PI;
        const cx = Math.cos(angle);
        const cy = Math.sin(angle);
        
        // åœ¨ 64Ã—64 ç¶²æ ¼ä¸ŠåæŠ•å½±
        for (let y = 0; y < 64; y++) {
            for (let x = 0; x < 64; x++) {
                const px = (x - 32) / 32;
                const py = (y - 32) / 32;
                const dist = Math.sqrt((px - cx * 0.9) ** 2 + (py - cy * 0.9) ** 2);
                const weight = Math.exp(-dist * dist * 5);
                sigma[y * 64 + x] += v * weight;
            }
        }
    }
    
    // æ­£è¦åŒ–èˆ‡å¹³æ»‘
    const maxVal = Math.max(...sigma);
    return sigma.map(v => Math.max(0, Math.min(1, v / maxVal)));
}

// ç”Ÿæˆç¤ºç¯„é‡å»ºçµæœï¼ˆç•¶æ¨¡å‹æœªè¼‰å…¥æ™‚ï¼‰
function generateDemoReconstruction(voltages) {
    const sigma = new Array(4096).fill(0);
    
    // æ‰¾åˆ°æœ€å¼·é›»å£“çš„ä½ç½®
    let maxIdx = 0;
    let maxV = voltages[0];
    for (let i = 1; i < voltages.length; i++) {
        if (voltages[i] > maxV) {
            maxV = voltages[i];
            maxIdx = i;
        }
    }
    
    const angle = (maxIdx / 20) * 2 * Math.PI;
    const cx = 32 + Math.cos(angle) * 12;
    const cy = 32 + Math.sin(angle) * 12;
    
    // ç”Ÿæˆé«˜æ–¯åˆ†ä½ˆçš„è§¸æ§é»
    for (let y = 0; y < 64; y++) {
        for (let x = 0; x < 64; x++) {
            const dist = Math.sqrt((x - cx) ** 2 + (y - cy) ** 2);
            sigma[y * 64 + x] = Math.exp(-dist * dist / 30);
        }
    }
    
    return sigma;
}

// é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
window.onload = function() {
    console.log('æ·±åº¦å­¸ç¿’é é¢å·²è¼‰å…¥');
    
    // æª¢æŸ¥ TensorFlow.js æ˜¯å¦è¼‰å…¥
    if (typeof tf !== 'undefined') {
        console.log('TensorFlow.js ç‰ˆæœ¬:', tf.version.tfjs);
        console.log('å¾Œç«¯:', tf.getBackend());
    } else {
        console.warn('TensorFlow.js æœªè¼‰å…¥');
    }
    
    // åˆå§‹åŒ– canvas èƒŒæ™¯
    const canvases = ['inputCanvas', 'traditionalCanvas', 'dlCanvas'];
    canvases.forEach(id => {
        const canvas = document.getElementById(id);
        if (canvas) {
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ç¹ªè£½æç¤ºæ–‡å­—
            ctx.fillStyle = '#95a5a6';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('ç­‰å¾…æ•¸æ“š...', canvas.width / 2, canvas.height / 2);
        }
    });
};
    </script>
</body>
</html>
